{% extends "base.html" %}
{% block content %}

<label id="notification_show2" >
    {% with messages = get_flashed_messages(with_categories=true) %} 
        {% if messages %} 
            {% for category,msg in messages %}
                <p class='{{ category }}'>{{ msg }}</p>
            {% endfor %} 
        {% endif %} 
    {% endwith %}
</label>
<br>
<div class="table_place"><br>
    <div class="table_name">
        <label >le period d'envoie engistrer </label>
    </div>
    <br>
    <form action="" method="post">
        <div class="table_content1">
            <div class="table_content2">
                <table class="table table-hover" id="tableId" >
                    <thead>
                    <tr>
                        <th scope="col">Emails</th>
                        <th scope="col">Every</th>
                        <th scope="col">AT</th>
                        <th scope="col">Report</th>
                        <th scope="col">Action</th>
                    </tr>
                    </thead>
                    <tbody>
                        {% for i in period_data %}
                            <tr>
                                <td>{{i.emails}}</td>
                                <td>{{i.perids}}</td>
                                <td>{{i.time}}</td>
                                <td>{{i.name_of_reportBI}}</td>
                                <!-- <td>
                                    <button id="drop">Delete</button>
                                </td> -->
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </form>

</div>

<script>
    // var table = document.getElementById("tableId");
    const drop_btn= document.getElementById("drop");
    // let idd;
    // drop_btn.addEventListener('onclick',addRowHandlers());
    // console.log(addRowHandlers())
    // function addRowHandlers() {
        
    //     var rows = table.getElementsByTagName("tr");
    //     for (i = 0; i < rows.length; i++) {
    //         var currentRow = table.rows[i];
    //         var createClickHandler = function(row) {
    //             return function() {
    //                 var cell = row.getElementsByTagName("td")[0];
    //                 var id=cell.innerHTML;

    //                 idd=id
    //                 console.log("id:" + id);
    //                 // console.log(window.idd);

    //             }
    //         };
            
    //         currentRow.onclick = createClickHandler(currentRow);
            
    //     }
        
    // }
    
    // drop_btn.addEventListener("click", e => {
    //     fetch('/my_table_of_period', {
    //         method: "POST",
    //         headers: {
    //           "Accept": "application/json",
    //           "Content-Type": "application/json"
    //         },
    //         body: JSON.stringify({
    //           c_check: String(e.innerHTML)
    //         })
    //       })
    //       .then(res => {
    //         console.log('am here')
    //         if (!res.ok) {
    //           throw Error(res.status);
    //         }

    //         return res.json();
    //       })
    //       .then(({data: {val}}) => {
    //         console.log('mm')
    //       }).catch(err => console.error(err));
    //   });

</script>

{% endblock content %}